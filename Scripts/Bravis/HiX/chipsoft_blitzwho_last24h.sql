/****** Script for SelectTopNRows command from SSMS  ******/
SELECT ID,
       ServerName,
       CheckDate,
       elapsed_time,
       session_id,
       query_text,
       query_plan,
       live_query_plan,
       cached_parameter_info,
       live_parameter_info,
       query_cost,
       status,
       wait_info,
       top_session_waits,
       blocking_session_id,
       open_transaction_count,
       is_implicit_transaction,
       nt_domain,
       host_name,
       login_name,
       nt_user_name,
       program_name,
       fix_parameter_sniffing,
       client_interface_name,
       login_time,
       start_time,
       request_time,
       request_cpu_time,
       request_logical_reads,
       request_writes,
       request_physical_reads,
       session_cpu,
       session_logical_reads,
       session_physical_reads,
       session_writes,
       tempdb_allocations_mb,
       memory_usage,
       estimated_completion_time,
       percent_complete,
       deadlock_priority,
       transaction_isolation_level,
       degree_of_parallelism,
       last_dop,
       min_dop,
       max_dop,
       last_grant_kb,
       min_grant_kb,
       max_grant_kb,
       last_used_grant_kb,
       min_used_grant_kb,
       max_used_grant_kb,
       last_ideal_grant_kb,
       min_ideal_grant_kb,
       max_ideal_grant_kb,
       last_reserved_threads,
       min_reserved_threads,
       max_reserved_threads,
       last_used_threads,
       min_used_threads,
       max_used_threads,
       grant_time,
       requested_memory_kb,
       grant_memory_kb,
       is_request_granted,
       required_memory_kb,
       query_memory_grant_used_memory_kb,
       ideal_memory_kb,
       is_small,
       timeout_sec,
       resource_semaphore_id,
       wait_order,
       wait_time_ms,
       next_candidate_for_memory_grant,
       target_memory_kb,
       max_target_memory_kb,
       total_memory_kb,
       available_memory_kb,
       granted_memory_kb,
       query_resource_semaphore_used_memory_kb,
       grantee_count,
       waiter_count,
       timeout_error_count,
       forced_grant_count,
       workload_group_name,
       resource_pool_name,
       context_info,
       query_hash,
       query_plan_hash,
       sql_handle,
       plan_handle,
       statement_start_offset,
       statement_end_offset
FROM DBA.dbo.BlitzWho
WHERE database_name = N'HiX_Acc'
      AND nt_user_name NOT IN ( N'sa_phixsql03_agent', N'sa_acomeztaak', N'SQLTELEMETRY', N'sa_acomez',
                                N'sa_has_host_acc'
)
      AND CheckDate >= DATEADD (HOUR, -24, GETDATE ());